webpackJsonp([1],{"+9Zb":function(e,t,a){"use strict";var o={render:function(){var e=this.$createElement;return(this._self._c||e)("div")},staticRenderFns:[]};t.a=o},"+H76":function(e,t,a){"use strict";var o=a("nxtM"),n=a.n(o),r=a("wytx");var i=function(e){a("VEOY")},s=a("Z0/y")(n.a,r.a,!1,i,null,null);t.default=s.exports},"+oZg":function(e,t){},"/2Ux":function(e,t){},"0Rih":function(e,t,a){"use strict";var o={render:function(){var e=this.$createElement;return(this._self._c||e)("router-view")},staticRenderFns:[]};t.a=o},"0rjR":function(e,t){},"1dB9":function(e,t){},"236G":function(e,t){},"3awG":function(e,t){},"4T8R":function(e,t){},"4qN4":function(e,t){},"5j58":function(e,t,a){"use strict";var o={render:function(){var e=this.$createElement;return(this._self._c||e)("div",[this._v("权限管理")])},staticRenderFns:[]};t.a=o},"6B30":function(e,t){},"6Fw9":function(e,t){},"6YAI":function(e,t,a){"use strict";var o=a("AGz5"),n=a.n(o),r=a("IL7U");var i=function(e){a("d0RY")},s=a("Z0/y")(n.a,r.a,!1,i,null,null);t.default=s.exports},"8/lq":function(e,t){},"8Uju":function(e,t){},"8n0i":function(e,t,a){"use strict";var o={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"all"},[this._v("\n\t我是用户管理界面\n")])},staticRenderFns:[]};t.a=o},"9nRy":function(e,t,a){"use strict";var o={render:function(){var e=this.$createElement;return(this._self._c||e)("router-view")},staticRenderFns:[]};t.a=o},AGz5:function(e,t){},AIhJ:function(e,t){},"AQ+Y":function(e,t){},CKoO:function(e,t){},"Dua/":function(e,t,a){"use strict";var o=a("+oZg"),n=a.n(o),r=a("+9Zb");var i=function(e){a("fssh")},s=a("Z0/y")(n.a,r.a,!1,i,null,null);t.default=s.exports},ESMP:function(e,t,a){"use strict";var o={render:function(){var e=this.$createElement;return(this._self._c||e)("router-view")},staticRenderFns:[]};t.a=o},GGRE:function(e,t){},IL7U:function(e,t,a){"use strict";var o={render:function(){var e=this.$createElement;return(this._self._c||e)("div")},staticRenderFns:[]};t.a=o},If8H:function(e,t,a){"use strict";var o={render:function(){var e=this.$createElement;return(this._self._c||e)("div")},staticRenderFns:[]};t.a=o},JvG4:function(e,t,a){"use strict";var o=a("oIDl"),n=a.n(o),r=a("wy9P");var i=function(e){a("SDTk")},s=a("Z0/y")(n.a,r.a,!1,i,null,null);t.default=s.exports},KktO:function(e,t,a){"use strict";var o=a("d3fZ"),n=a.n(o),r=a("If8H");var i=function(e){a("AIhJ")},s=a("Z0/y")(n.a,r.a,!1,i,null,null);t.default=s.exports},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("MVMM"),n=a("aozt"),r=a.n(n),i=(a("Yipb"),a("9rMa")),s=(a("NI+g"),a("x4un")),l=a.n(s),d=(a("4qN4"),a("aA9S")),c=a.n(d),m={online:!1,apiUrl:"//admin-dev-api.sgu6.com",wechatUrl:"http://wechat-dev.sgu6.com"},u={"wechat-dev.sgu6.com":{online:!1,apiUrl:"//api-dev.sgu6.com",wechatUrl:"http://wechat-dev.sgu6.com"},"weixin-qa.sgu6.com":{online:!1,apiUrl:"//api-qa.sgu6.com",wechatUrl:"http://weixin-qa.sgu6.com"},"admin.sgu6.com":{online:!1,apiUrl:"//rest-api.sgu6.com",wechatUrl:"http://weixin.sgu6.com"}}[window.location.hostname];c()(m,u);var p=m,h=a("zO6J"),f=a("3cXf"),g=a.n(f),v={data:function(){return{logining:!1,ruleForm2:{userName:"",password:"",clientType:"商家管理后台",isRemember:!1},rules2:{userName:[{required:!0,message:"请输入账号",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}}},methods:{login:function(){var e=this;a("NI+g");this.$refs.ruleForm2.validate(function(t){if(t){e.logining=!0;var a=p.apiUrl+"/user/login";e.$http.post(a,e.ruleForm2).then(function(t){void 0==t.data.errCode?(localStorage.sguuser=g()(e.ruleForm2),localStorage.loginSession=g()(t.data),e.$router.push({path:"/"})):(alert(t.data.errMsg),e.logining=!1)})}})}},created:function(){if(void 0!=localStorage.sguuser||""!=localStorage.sguuser){var e=JSON.parse(localStorage.sguuser);if(!e||""==e)return;this.ruleForm2.userName=e.userName,this.ruleForm2.password=e.password}}},b={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{ref:"ruleForm2",staticClass:"demo-ruleForm login-container",attrs:{rules:e.rules2,model:e.ruleForm2,"label-position":"left","label-width":"0px"}},[a("h3",{staticClass:"title",staticStyle:{"font-size":"20px"}},[e._v("拾谷鸟后台管理系统")]),e._v(" "),a("el-form-item",{attrs:{prop:"user"}},[a("el-input",{attrs:{type:"text","auto-complete":"off",placeholder:"账号/邮箱/手机号码"},model:{value:e.ruleForm2.userName,callback:function(t){e.$set(e.ruleForm2,"userName",t)},expression:"ruleForm2.userName"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"password"}},[a("el-input",{attrs:{type:"password","auto-complete":"off",placeholder:"密码"},model:{value:e.ruleForm2.password,callback:function(t){e.$set(e.ruleForm2,"password",t)},expression:"ruleForm2.password"}})],1),e._v(" "),a("el-checkbox",{staticClass:"remember",model:{value:e.ruleForm2.isRemember,callback:function(t){e.$set(e.ruleForm2,"isRemember",t)},expression:"ruleForm2.isRemember"}},[e._v("记住密码")]),e._v(" "),a("el-form-item",{staticStyle:{width:"100%"}},[a("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary",loading:e.logining},on:{click:function(t){e.login()}}},[e._v("登录")])],1),e._v(" "),a("el-form-item")],1)},staticRenderFns:[]};var F,_=a("Z0/y")(v,b,!1,function(e){a("mxn6")},null,null).exports,y=a("+H76"),k=a("NI+g");if(void 0!=localStorage.loginSession&&""!=localStorage.loginSession){var w=(new Date).getTime(),$=Math.random().toString(36).substr(2,6),x=JSON.parse(localStorage.loginSession).id,I=[JSON.parse(localStorage.loginSession).accessToken,w,$].sort(),S=k(I[0]+I[1]+I[2]);F={timestamp:w,nonce:$,signature:S,sessionId:x,requestId:""}}var C={data:function(){return{sysName:"拾谷鸟后台管理",collapsed:!1,sysUserName:"",sysUserAvatar:"",form:{name:"",region:"",date1:"",date2:"",delivery:!1,type:[],resource:"",desc:""}}},methods:{onSubmit:function(){console.log("submit!")},handleopen:function(){},handleclose:function(){},handleselect:function(e,t){},logout:function(){var e=this,t=this;this.$confirm("确认退出吗?","提示",{}).then(function(){e.$http({method:"get",url:p.apiUrl+"/user/logout",header:{sessionId:F.sessionId,signature:F.signature,nonce:F.nonce,timestamp:F.timestamp,requestId:""}}).then(function(){localStorage.loginSession="",localStorage.sguuser="",t.$router.push("/login")})}).catch(function(){})},collapse:function(){this.collapsed=!this.collapsed},showMenu:function(e,t){this.$refs.menuCollapsed.getElementsByClassName("submenu-hook-"+e)[0].style.display=t?"block":"none"}},created:function(){var e=this;if(void 0!=localStorage.sguuser&&""!=localStorage.sguuser&&"undefined"!=localStorage.sguuser){var t=JSON.parse(localStorage.sguuser);this.$http.post(p.apiUrl+"/user/login",t).then(function(t){null!=t.data.errCode&&e.$router.push({path:"/login"})})}else this.$router.push({path:"/login"})},mounted:function(){if(void 0!=localStorage.sguuser&&""!=localStorage.sguuser&&"undefined"!=localStorage.sguuser){var e=JSON.parse(localStorage.sguuser);this.sysUserName=e.userName}else this.$router.push({path:"/login"})}},q={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{staticClass:"container"},[o("el-col",{staticClass:"header",attrs:{span:24}},[o("el-col",{staticClass:"logo",class:e.collapsed?"logo-collapse-width":"logo-width",attrs:{span:10}},[e._v("\n\t\t\t"+e._s(e.collapsed?"":e.sysName)+"\n\t\t")]),e._v(" "),o("el-col",{attrs:{span:10}},[o("div",{staticClass:"tools",on:{click:function(t){return t.preventDefault(),e.collapse(t)}}},[o("i",{staticClass:"el-icon-menu",staticStyle:{"font-size":"20px","line-height":"60px"}})])]),e._v(" "),o("el-col",{staticClass:"userinfo",attrs:{span:4}},[o("el-dropdown",{attrs:{trigger:"hover"}},[o("span",{staticClass:"el-dropdown-link userinfo-inner"},[o("img",{attrs:{src:a("t3qZ")}}),e._v(e._s(e.sysUserName))]),e._v(" "),o("el-dropdown-menu",{staticStyle:{"font-size":"16px"},attrs:{slot:"dropdown"},slot:"dropdown"},[o("el-dropdown-item",{nativeOn:{click:function(t){return e.logout(t)}}},[e._v("退出登录")])],1)],1)],1)],1),e._v(" "),o("el-col",{staticClass:"main",attrs:{span:24}},[o("aside",{class:e.collapsed?"menu-collapsed":"menu-expanded"},[o("el-menu",{directives:[{name:"show",rawName:"v-show",value:!e.collapsed,expression:"!collapsed"}],staticClass:"el-menu-vertical-demo",attrs:{"default-active":e.$route.path,"unique-opened":"",router:""},on:{open:e.handleopen,close:e.handleclose,select:e.handleselect}},[e._l(e.$router.options.routes,function(t,a){return t.hidden?e._e():[t.leaf?e._e():o("el-submenu",{attrs:{index:a+""}},[o("template",{slot:"title"},[o("i",{class:t.iconCls}),e._v(e._s(t.name))]),e._v(" "),e._l(t.children,function(t){return t.hidden?e._e():o("el-menu-item",{key:t.path,attrs:{index:t.path}},[e._v(e._s(t.name))])})],2),e._v(" "),t.leaf&&t.children.length>0?o("el-menu-item",{attrs:{index:t.children[0].path}},[o("i",{class:t.iconCls}),e._v(e._s(t.children[0].name))]):e._e()]})],2),e._v(" "),o("ul",{directives:[{name:"show",rawName:"v-show",value:e.collapsed,expression:"collapsed"}],ref:"menuCollapsed",staticClass:"el-menu el-menu-vertical-demo collapsed"},e._l(e.$router.options.routes,function(t,a){return t.hidden?e._e():o("li",{staticClass:"el-submenu item"},[t.leaf?[o("li",{staticClass:"el-submenu"},[o("div",{staticClass:"el-submenu__title el-menu-item",class:e.$route.path==t.children[0].path?"is-active":"",staticStyle:{"padding-left":"20px",height:"56px","line-height":"56px",padding:"0 20px"},on:{click:function(a){e.$router.push(t.children[0].path)}}},[o("i",{class:t.iconCls})])])]:[o("div",{staticClass:"el-submenu__title",staticStyle:{"padding-left":"20px"},on:{mouseover:function(t){e.showMenu(a,!0)},mouseout:function(t){e.showMenu(a,!1)}}},[o("i",{class:t.iconCls})]),e._v(" "),o("ul",{staticClass:"el-menu submenu",class:"submenu-hook-"+a,on:{mouseover:function(t){e.showMenu(a,!0)},mouseout:function(t){e.showMenu(a,!1)}}},e._l(t.children,function(t){return t.hidden?e._e():o("li",{key:t.path,staticClass:"el-menu-item",class:e.$route.path==t.path?"is-active":"",staticStyle:{"padding-left":"40px"},on:{click:function(a){e.$router.push(t.path)}}},[e._v(e._s(t.name))])}))]],2)}))],1),e._v(" "),o("section",{staticClass:"content-container"},[o("div",{staticClass:"grid-content bg-purple-light"},[o("el-col",{staticClass:"breadcrumb-container",attrs:{span:24}},[o("strong",{staticClass:"title",staticStyle:{"font-size":"16px"}},[e._v(e._s(e.$route.name))]),e._v(" "),o("el-breadcrumb",{staticClass:"breadcrumb-inner",staticStyle:{"font-size":"16px"},attrs:{separator:"/"}},e._l(e.$route.matched,function(t){return o("el-breadcrumb-item",{key:t.path},[e._v("\n\t\t\t\t\t\t\t"+e._s(t.name)+"\n\t\t\t\t\t\t")])}))],1),e._v(" "),o("el-col",{staticClass:"content-wrapper",attrs:{span:24}},[o("transition",{attrs:{name:"fade",mode:"out-in"}},[o("router-view")],1)],1)],1)])])],1)},staticRenderFns:[]};var N=a("Z0/y")(C,q,!1,function(e){a("3awG")},"data-v-5a5e24c0",null).exports,R={data:function(){return{keyword:"",mapsearch:"",mapshow:!1,shangjiaid:"",show:!0,showadd:!1,showedit:!1,show_merchantId:!1,filters:{name:""},userlist:[],total:0,page:1,listLoading:!1,sels:[],editFormVisible:!1,editLoading:!1,editFormRules:{name:[{required:!0,message:"请输入姓名",trigger:"blur"}]},addFormVisible:!1,addLoading:!1,addFormRules:{name:[{required:!0,message:"请输入机器名",trigger:"blur"}]}}},methods:{handleCurrentChange:function(e){this.page=e,this.getuserlist()},add0:function(e){return e<10?"0"+e:e},timeFormat:function(e){var t=new Date(e),a=t.getFullYear(),o=t.getMonth()+1,n=t.getDate(),r=t.getHours(),i=t.getMinutes();return a+"."+this.add0(o)+"."+this.add0(n)+" "+this.add0(r)+":"+this.add0(i)},status:function(e){return 0==e?"禁用":1==e?"正常":""},getuserlist:function(){var e=this;this.listLoading=!0;var t=p.apiUrl+"/user/list?page="+this.page+"&pageSize=10&deleted=false&keyword="+this.keyword;this.$http({method:"get",url:t,header:{sessionId:F.sessionId,signature:F.signature,nonce:F.nonce,timestamp:F.timestamp,requestId:""}}).then(function(t){e.userlist=t.data.list,e.total=t.data.total,e.listLoading=!1})},handleDel:function(e,t){var a=this;this.$confirm("确认删除本用户吗?","提示",{type:"warning"}).then(function(){var e=p.apiUrl+"/user";a.$http({method:"delete",url:e,data:{ids:[t.id]},header:{sessionId:F.sessionId,signature:F.signature,nonce:F.nonce,timestamp:F.timestamp,requestId:""}}).then(function(e){void 0==e.data.errCode?(a.$message({message:"删除成功",type:"success"}),a.getuserlist()):(a.$message({message:e.data.errMsg,type:"warning"}),a.getuserlist())}).catch(function(e){console.log("错误")})}).catch(function(){})},handleEdit:function(e,t){this.$router.push({path:"/changeuser",name:"修改用户",query:{id:t.id}})},handleAdd:function(){this.$router.push({path:"/adduser"})},selsChange:function(e){this.sels=e},batchRemove:function(){var e=this,t=this.sels.map(function(e){return e.id});this.$confirm("确认删除选中用户吗？","提示",{type:"warning"}).then(function(){e.listLoading=!0;var a={ids:t};console.log(a);var o=p.apiUrl+"/user";e.$http({method:"delete",url:o,data:a,header:{sessionId:F.sessionId,signature:F.signature,nonce:F.nonce,timestamp:F.timestamp,requestId:""}}).then(function(t){void 0==t.data.errCode?(e.$message({message:"删除成功",type:"success"}),e.getuserlist()):(e.$message({message:t.data.errMsg,type:"warning"}),e.getuserlist())})}).catch(function(){})},openmap:function(){var e=this;this.mapshow=!0;var t=document.getElementById("mapbtn"),a=document.getElementById("map");(a=new BMap.Map("map")).centerAndZoom(new BMap.Point(113.943214,22.529155),17),a.enableScrollWheelZoom(),a.enableKeyboard(),a.enableDragging(),a.enableDoubleClickZoom(),a.addEventListener("click",function(t){e.addForm.lng=t.point.lng,e.addForm.lat=t.point.lat});var o=new BMap.LocalSearch(a,{renderOptions:{map:a}});t.addEventListener("click",function(){""!=e.mapsearch&&o.search(e.mapsearch)})},merchantId:function(){this.show_merchantId=!0}},created:function(){this.getuserlist()}},U={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("section",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}]},[a("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px"},attrs:{span:24}},[a("el-form",{attrs:{inline:!0,model:e.filters}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"用户名/邮箱"},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.getuserlist()}}},[e._v("查询")])],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.handleAdd}},[e._v("新增")])],1)],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.userlist,"highlight-current-row":""},on:{"selection-change":e.selsChange}},[a("el-table-column",{attrs:{type:"selection",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{type:"index",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"loginName",label:"用户名","min-width":"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"roleName",label:"角色名","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"gender",label:"性别",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n\t\t        "+e._s(1==t.row.gender?"男":"女")+"\n\t\t    ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"email",label:"邮箱","min-width":"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间","min-width":"150",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n\t\t        "+e._s(e.timeFormat(t.row.createTime))+"\n\t\t    ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"账号状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n\t\t        "+e._s(e.status(t.row.status))+"\n\t\t    ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"220",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small"},on:{click:function(a){e.handleEdit(t.$index,t.row)}}},[e._v("修改")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){e.handleDel(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("el-col",{staticClass:"toolbar",attrs:{span:24}},[a("el-button",{attrs:{type:"danger",disabled:0===this.sels.length},on:{click:e.batchRemove}},[e._v("批量删除")]),e._v(" "),a("el-pagination",{staticStyle:{float:"right"},attrs:{layout:"prev, pager, next","page-size":10,total:e.total},on:{"current-change":e.handleCurrentChange}})],1)],1)])},staticRenderFns:[]};var L=a("Z0/y")(R,U,!1,function(e){a("Zj6V")},"data-v-61c46d1c",null).exports,E=(a("fFnX"),{data:function(){return{keyword:"",mapsearch:"",mapshow:!1,shangjiaid:"",show:!0,showadd:!1,showedit:!1,show_merchantId:!1,filters:{name:""},userlist:[],total:0,page:1,listLoading:!1,sels:[],editFormRules:{name:[{required:!0,message:"请输入姓名",trigger:"blur"}]},addFormVisible:!1,addLoading:!1,addFormRules:{name:[{required:!0,message:"请输入机器名",trigger:"blur"}]}}},methods:{handleCurrentChange:function(e){this.page=e,this.getmemberlist()},getmemberlist:function(){var e=this;this.listLoading=!0;var t=p.apiUrl+"/member/list?page="+this.page+"&pageSize=10&deleted=false&keyword="+this.keyword;this.$http({method:"get",url:t,header:{sessionId:F.sessionId,signature:F.signature,nonce:F.nonce,timestamp:F.timestamp,requestId:""}}).then(function(t){e.userlist=t.data.list,e.total=t.data.total,e.listLoading=!1})},handleDel:function(e,t){var a=this;this.$confirm("确认删除此会员吗?","提示",{type:"warning"}).then(function(){var e=p.apiUrl+"/member";a.$http({method:"delete",url:e,data:{ids:[t.id]},header:{sessionId:F.sessionId,signature:F.signature,nonce:F.nonce,timestamp:F.timestamp,requestId:""}}).then(function(e){void 0==e.data.errCode?(a.$message({message:"删除成功",type:"success"}),a.getmemberlist()):(a.$message({message:e.data.errMsg,type:"warning"}),a.getmemberlist())}).catch(function(e){console.log("错误")})}).catch(function(){})},handleEdit:function(e,t){this.$router.push({path:"/changemember",name:"修改会员",query:{id:t.id}})},selsChange:function(e){this.sels=e},batchRemove:function(){var e=this,t=this.sels.map(function(e){return e.id});this.$confirm("确认删除选中会员吗？","提示",{type:"warning"}).then(function(){e.listLoading=!0;var a={ids:t};console.log(a);var o=p.apiUrl+"/member";e.$http({method:"delete",url:o,data:a,header:{sessionId:F.sessionId,signature:F.signature,nonce:F.nonce,timestamp:F.timestamp,requestId:""}}).then(function(t){void 0==t.data.errCode?(e.$message({message:"删除成功",type:"success"}),e.getmemberlist()):(e.$message({message:t.data.errMsg,type:"warning"}),e.getmemberlist())})}).catch(function(){})},merchantId:function(){this.show_merchantId=!0}},created:function(){this.getmemberlist()}}),M={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("section",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}]},[a("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px"},attrs:{span:24}},[a("el-form",{attrs:{inline:!0,model:e.filters}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"用户名/手机号码"},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.getmemberlist()}}},[e._v("查询")])],1)],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.userlist,"highlight-current-row":""},on:{"selection-change":e.selsChange}},[a("el-table-column",{attrs:{type:"selection",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{type:"index",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"username",label:"昵称",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"phone",label:"手机号码",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"vip",label:"VIP",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n\t\t        "+e._s(1==t.row.vip?"是":"否")+"\n\t\t    ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"score",label:"积分",width:"120",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"percentage",label:"提成",width:"120",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"用户状态","min-width":"100",sortablealign:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n\t\t        "+e._s(1==t.row.status?"正常":"异常")+"\n\t\t    ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"220",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small"},on:{click:function(a){e.handleEdit(t.$index,t.row)}}},[e._v("修改")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){e.handleDel(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("el-col",{staticClass:"toolbar",attrs:{span:24}},[a("el-button",{attrs:{type:"danger",disabled:0===this.sels.length},on:{click:e.batchRemove}},[e._v("批量删除")]),e._v(" "),a("el-pagination",{staticStyle:{float:"right"},attrs:{layout:"prev, pager, next","page-size":10,total:e.total},on:{"current-change":e.handleCurrentChange}})],1)],1)])},staticRenderFns:[]};var D=a("Z0/y")(E,M,!1,function(e){a("w6cp")},"data-v-59ebe6e6",null).exports,B={data:function(){return{options:[{status:0,value:"女"},{status:1,value:"男"}],options1:[{status:0,value:"不是"},{status:1,value:"是"}],options2:[{status:0,value:"禁用"},{status:1,value:"正常"}],editForm:{},editFormRules:{loginName:[{required:!0,message:"请输入用户名",trigger:"blur"}]},editLoading:!1,id:""}},methods:{getParams:function(){this.id=this.$route.query.id},handleEdit:function(e){var t=this,a=p.apiUrl+"/member/"+e;this.$http({method:"get",url:a,header:{sessionId:F.sessionId,signature:F.signature,nonce:F.nonce,timestamp:F.timestamp,requestId:""}}).then(function(e){console.log(e.data),t.editForm=e.data})},editSubmit:function(){var e=this;this.$confirm("确认修改此会员吗?","提示",{type:"warning"}).then(function(){var t=p.apiUrl+"/member";e.$http({method:"put",url:t,data:e.editForm,header:{sessionId:F.sessionId,signature:F.signature,nonce:F.nonce,timestamp:F.timestamp,requestId:""}}).then(function(t){void 0==t.data.errCode?e.$alert("修改成功","提示",{confirmButtonText:"确定",callback:function(t){e.$router.push({path:"/memberlist"})}}):e.$alert(t.data.errMsg,"提示",{confirmButtonText:"确定",callback:function(t){e.$router.push({})}})})}).catch(function(){})},quxiao:function(){var e=this;this.$alert("取消修改","提示",{confirmButtonText:"确定",callback:function(t){e.$router.push({path:"/memberlist"})}})}},computed:{},created:function(){this.handleEdit(this.$route.query.id)},watch:{$route:"getParams"}},W={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticStyle:{"font-size":"16px"}},[a("el-form",{ref:"editForm",attrs:{inline:!0,model:e.editForm,"label-width":"100px",rules:e.editFormRules}},[a("el-form-item",{attrs:{label:"用户名",prop:"username"}},[a("el-input",{model:{value:e.editForm.username,callback:function(t){e.$set(e.editForm,"username",t)},expression:"editForm.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"实名",prop:"realname"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.realname,callback:function(t){e.$set(e.editForm,"realname",t)},expression:"editForm.realname"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"账户状态",prop:"status"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.editForm.status,callback:function(t){e.$set(e.editForm,"status",t)},expression:"editForm.status"}},e._l(e.options2,function(e){return a("el-option",{key:e.status,attrs:{label:e.value,value:e.status}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"QQ",prop:"qq"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.qq,callback:function(t){e.$set(e.editForm,"qq",t)},expression:"editForm.qq"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"手机号码",prop:"phone"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.phone,callback:function(t){e.$set(e.editForm,"phone",t)},expression:"editForm.phone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.email,callback:function(t){e.$set(e.editForm,"email",t)},expression:"editForm.email"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"支付宝账号",prop:"buyerLogonId "}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.buyerLogonId,callback:function(t){e.$set(e.editForm,"buyerLogonId",t)},expression:"editForm.buyerLogonId "}})],1),e._v(" "),a("el-form-item",{attrs:{label:"微信号",prop:"wechatId"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.wechatId,callback:function(t){e.$set(e.editForm,"wechatId",t)},expression:"editForm.wechatId "}})],1),e._v(" "),a("el-form-item",{attrs:{label:"性别",prop:"gender"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.editForm.gender,callback:function(t){e.$set(e.editForm,"gender",t)},expression:"editForm.gender"}},e._l(e.options,function(e){return a("el-option",{key:e.status,attrs:{label:e.value,value:e.status}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"销售提成",prop:"percentage "}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.percentage,callback:function(t){e.$set(e.editForm,"percentage",t)},expression:"editForm.percentage "}})],1),e._v(" "),a("el-form-item",{attrs:{label:"积分",prop:"score"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.score,callback:function(t){e.$set(e.editForm,"score",t)},expression:"editForm.score"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"出生日期",prop:"birthday"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:e.editForm.birthday,callback:function(t){e.$set(e.editForm,"birthday",t)},expression:"editForm.birthday"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"账户余额",prop:"accountSum"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.accountSum,callback:function(t){e.$set(e.editForm,"accountSum",t)},expression:"editForm.accountSum"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"VIP",prop:"vip"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.editForm.vip,callback:function(t){e.$set(e.editForm,"vip",t)},expression:"editForm.vip"}},e._l(e.options1,function(e){return a("el-option",{key:e.status,attrs:{label:e.value,value:e.status}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"米余量",prop:"riceSum "}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.riceSum,callback:function(t){e.$set(e.editForm,"riceSum",t)},expression:"editForm.riceSum "}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",loading:e.editLoading},on:{click:function(t){e.editSubmit()}}},[e._v("修改")]),e._v(" "),a("el-button",{on:{click:function(t){e.quxiao()}}},[e._v("取消")])],1)],1)},staticRenderFns:[]};var Z=a("Z0/y")(B,W,!1,function(e){a("aK3Y")},null,null).exports,z=(a("U0xQ"),{data:function(){return{addForm:{loginName:"",password:"",name:"",gender:"","birthday ":"","mobile ":"",email:"","idNumber ":"","brandBusinessId ":"","wechatId ":"","unionId ":"","province ":"",city:"",address:"",roleId:"","merchantId ":""},options:[],mapshow:!1,mapsearch:"",addLoading:!1,show_merchantId:!1,addFormRules:{loginName:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],roleId:[{required:!0,message:"请选择角色",trigger:"blur"}]}}},methods:{getRoleId:function(){var e=this,t=p.apiUrl+"/role/list?page=1&pageSize=100";this.$http({method:"get",url:t,header:{sessionId:F.sessionId,signature:F.signature,nonce:F.nonce,timestamp:F.timestamp,requestId:""}}).then(function(t){e.options=t.data.list})},newUser:function(){var e=this;this.$confirm("确认添加本用户吗?","提示",{type:"warning"}).then(function(){var t=p.apiUrl+"/user";e.$http({method:"post",url:t,data:e.addForm,header:{sessionId:F.sessionId,signature:F.signature,nonce:F.nonce,timestamp:F.timestamp,requestId:""}}).then(function(t){void 0==t.data.errCode?e.$alert("新用户添加成功","提示",{confirmButtonText:"确定",callback:function(t){e.$router.push({path:"/userlist"})}}):e.$alert(t.data.errMsg,"提示",{confirmButtonText:"确定",callback:function(e){}})})}).catch(function(){})},callback:function(){var e=this;this.$alert("确认取消添加","提示",{confirmButtonText:"确定",callback:function(t){e.$router.push({path:"/userlist"})}})}},created:function(){this.getRoleId()}}),T={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticStyle:{"font-size":"16px"}},[a("br"),e._v(" "),a("el-form",{ref:"addForm",attrs:{inline:!0,model:e.addForm,"label-width":"80px",rules:e.addFormRules}},[a("el-form-item",{attrs:{label:"用户名",prop:"loginName"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.loginName,callback:function(t){e.$set(e.addForm,"loginName",t)},expression:"addForm.loginName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.password,callback:function(t){e.$set(e.addForm,"password",t)},expression:"addForm.password"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"角色",prop:"roleId"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.addForm.roleId,callback:function(t){e.$set(e.addForm,"roleId",t)},expression:"addForm.roleId"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"姓名",prop:"name"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.name,callback:function(t){e.$set(e.addForm,"name",t)},expression:"addForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"身份证号",prop:"idNumber"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.idNumber,callback:function(t){e.$set(e.addForm,"idNumber",t)},expression:"addForm.idNumber"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"手机号码",prop:"mobile"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.mobile,callback:function(t){e.$set(e.addForm,"mobile",t)},expression:"addForm.mobile"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.email,callback:function(t){e.$set(e.addForm,"email",t)},expression:"addForm.email"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"品牌商ID",prop:"brandBusinessId"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.brandBusinessId,callback:function(t){e.$set(e.addForm,"brandBusinessId",t)},expression:"addForm.brandBusinessId"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"微信号ID",prop:"wechatId"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.wechatId,callback:function(t){e.$set(e.addForm,"wechatId",t)},expression:"addForm.wechatId"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"微信号",prop:"unionId"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.unionId,callback:function(t){e.$set(e.addForm,"unionId",t)},expression:"addForm.unionId"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"省",prop:"province"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.province,callback:function(t){e.$set(e.addForm,"province",t)},expression:"addForm.province"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"市",prop:"city"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.city,callback:function(t){e.$set(e.addForm,"city",t)},expression:"addForm.city"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"详细地址",prop:"address"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.address,callback:function(t){e.$set(e.addForm,"address",t)},expression:"addForm.address"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"商家ID",prop:"merchantId"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.merchantId,callback:function(t){e.$set(e.addForm,"merchantId",t)},expression:"addForm.merchantId"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"出生日期",prop:"birthday"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:e.addForm.birthday,callback:function(t){e.$set(e.addForm,"birthday",t)},expression:"addForm.birthday"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"性别",prop:"gender"}},[[a("el-radio",{attrs:{label:"1"},model:{value:e.addForm.gender,callback:function(t){e.$set(e.addForm,"gender",t)},expression:"addForm.gender"}},[e._v("男")]),e._v(" "),a("el-radio",{attrs:{label:"2"},model:{value:e.addForm.gender,callback:function(t){e.$set(e.addForm,"gender",t)},expression:"addForm.gender"}},[e._v("女")])]],2)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",loading:e.addLoading},nativeOn:{click:function(t){e.newUser()}}},[e._v("提交")]),e._v(" "),a("el-button",{nativeOn:{click:function(t){e.callback()}}},[e._v("取消")])],1)],1)},staticRenderFns:[]};var V=a("Z0/y")(z,T,!1,function(e){a("xcpF")},"data-v-c604a6c2",null).exports,O={data:function(){return{options:[],options1:[],options2:[{status:0,value:"禁用"},{status:1,value:"正常"}],editForm:{},editFormRules:{loginName:[{required:!0,message:"请输入用户名",trigger:"blur"}]},editLoading:!1,id:""}},methods:{getParams:function(){this.id=this.$route.query.id},handleEdit:function(e){var t=this,a=p.apiUrl+"/user/"+e;this.$http({method:"get",url:a,header:{sessionId:F.sessionId,signature:F.signature,nonce:F.nonce,timestamp:F.timestamp,requestId:""}}).then(function(e){console.log(e.data),t.editForm=e.data})},editSubmit:function(){var e=this;this.$confirm("确认修改本用户吗?","提示",{type:"warning"}).then(function(){var t=p.apiUrl+"/user";e.$http({method:"put",url:t,data:e.editForm,header:{sessionId:F.sessionId,signature:F.signature,nonce:F.nonce,timestamp:F.timestamp,requestId:""}}).then(function(t){void 0==t.data.errCode?e.$alert("修改用户成功","提示",{confirmButtonText:"确定",callback:function(t){e.$router.push({path:"/userlist"})}}):e.$alert(t.data.errMsg,"提示",{confirmButtonText:"确定",callback:function(t){e.$router.push({})}})})}).catch(function(){})},quxiao:function(){var e=this;this.$alert("取消修改","提示",{confirmButtonText:"确定",callback:function(t){e.$router.push({path:"/userlist"})}})},getoptions:function(){var e=this,t=p.apiUrl+"/role/list?page=1&pageSize=100";this.$http({mehtod:"get",url:t,header:{sessionId:F.sessionId,signature:F.signature,nonce:F.nonce,timestamp:F.timestamp,requestId:""}}).then(function(t){e.options=t.data.list})},getoptions1:function(){var e=this,t=p.apiUrl+"/merchant/list?page=1&pageSize=100";this.$http({mehtod:"get",url:t,header:{sessionId:F.sessionId,signature:F.signature,nonce:F.nonce,timestamp:F.timestamp,requestId:""}}).then(function(t){e.options1=t.data.list})}},computed:{},created:function(){this.handleEdit(this.$route.query.id),this.getoptions(),this.getoptions1()},watch:{$route:"getParams"}},P={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticStyle:{"font-size":"16px"}},[a("el-form",{ref:"editForm",attrs:{inline:!0,model:e.editForm,"label-width":"100px",rules:e.editFormRules}},[a("el-form-item",{attrs:{label:"用户名",prop:"loginName"}},[a("el-input",{model:{value:e.editForm.loginName,callback:function(t){e.$set(e.editForm,"loginName",t)},expression:"editForm.loginName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"角色",prop:"roleId"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.editForm.roleId,callback:function(t){e.$set(e.editForm,"roleId",t)},expression:"editForm.roleId"}},e._l(e.options,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"商家ID",prop:"merchantId"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.editForm.merchantId,callback:function(t){e.$set(e.editForm,"merchantId",t)},expression:"editForm.merchantId"}},e._l(e.options1,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"姓名",prop:"name"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.name,callback:function(t){e.$set(e.editForm,"name",t)},expression:"editForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"账户状态",prop:"status"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.editForm.status,callback:function(t){e.$set(e.editForm,"status",t)},expression:"editForm.status"}},e._l(e.options2,function(e){return a("el-option",{key:e.status,attrs:{label:e.value,value:e.status}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"身份证号",prop:"idNumber"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.idNumber,callback:function(t){e.$set(e.editForm,"idNumber",t)},expression:"editForm.idNumber"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"手机号码",prop:"mobile"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.mobile,callback:function(t){e.$set(e.editForm,"mobile",t)},expression:"editForm.mobile"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.email,callback:function(t){e.$set(e.editForm,"email",t)},expression:"editForm.email"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"品牌商ID",prop:"brandBusinessId"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.brandBusinessId,callback:function(t){e.$set(e.editForm,"brandBusinessId",t)},expression:"editForm.brandBusinessId"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"微信号ID",prop:"wechatId"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.wechatId,callback:function(t){e.$set(e.editForm,"wechatId",t)},expression:"editForm.wechatId "}})],1),e._v(" "),a("el-form-item",{attrs:{label:"微信号",prop:"unionId"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.unionId,callback:function(t){e.$set(e.editForm,"unionId",t)},expression:"editForm.unionId "}})],1),e._v(" "),a("el-form-item",{attrs:{label:"省",prop:"province"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.province,callback:function(t){e.$set(e.editForm,"province",t)},expression:"editForm.province"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"市",prop:"city"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.city,callback:function(t){e.$set(e.editForm,"city",t)},expression:"editForm.city"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"详细地址",prop:"address"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.address,callback:function(t){e.$set(e.editForm,"address",t)},expression:"editForm.address"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"出生日期",prop:"birthday"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:e.editForm.birthday,callback:function(t){e.$set(e.editForm,"birthday",t)},expression:"editForm.birthday"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"性别",prop:"gender"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:1==e.editForm.gender?"男":"女",callback:function(t){e.$set(e.editForm,"gender==1 ? '男' : '女'",t)},expression:"editForm.gender==1 ? '男' : '女'  "}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",loading:e.editLoading},on:{click:function(t){e.editSubmit()}}},[e._v("修改")]),e._v(" "),a("el-button",{on:{click:function(t){e.quxiao()}}},[e._v("取消")])],1)],1)},staticRenderFns:[]};var A=a("Z0/y")(O,P,!1,function(e){a("n7KG")},null,null).exports,K=a("Dua/"),Y=(a("y5Kl"),{data:function(){return{keyword:"",mapsearch:"",mapshow:!1,shangjiaid:"",show:!0,showadd:!1,showedit:!1,show_merchantId:!1,filters:{name:""},machinelist:[],total:0,page:1,listLoading:!1,sels:[],editFormVisible:!1,editLoading:!1,editFormRules:{name:[{required:!0,message:"请输入姓名",trigger:"blur"}]},addLoading:!1,addFormRules:{name:[{required:!0,message:"请输入机器名",trigger:"blur"}]}}},methods:{handleCurrentChange:function(e){this.page=e,console.log(e),this.getmachine()},getmachine:function(){var e=this;this.listLoading=!0;var t=p.apiUrl+"/machine/list?page="+this.page+"&pageSize=10&deleted=false&keyword="+this.keyword;this.$http({method:"get",url:t,header:{sessionId:F.sessionId,signature:F.signature,nonce:F.nonce,timestamp:F.timestamp,requestId:""}}).then(function(t){e.machinelist=t.data.list,e.total=t.data.total,e.listLoading=!1})},handleDel:function(e,t){var a=this;this.$confirm("确认删除本机器吗?","提示",{type:"warning"}).then(function(){var e=p.apiUrl+"/machine";a.$http({method:"delete",url:e,data:{ids:[t.id]},header:{sessionId:F.sessionId,signature:F.signature,nonce:F.nonce,timestamp:F.timestamp,requestId:""}}).then(function(e){void 0==e.data.errCode?(a.$message({message:"删除成功",type:"success"}),a.getmachine()):(a.$message({message:e.data.errMsg,type:"warning"}),a.getmachine())}).catch(function(e){console.log("错误")})}).catch(function(){})},handleEdit:function(e,t){this.$router.push({path:"/changemachine",name:"修改机器",query:{machineNo:t.machineNo}})},handleAdd:function(){this.$router.push({path:"/addmachine"})},selsChange:function(e){this.sels=e},batchRemove:function(){var e=this,t=this.sels.map(function(e){return e.id});this.$confirm("确认删除选中机器吗？","提示",{type:"warning"}).then(function(){e.listLoading=!0;var a={ids:t};console.log(a);var o=p.apiUrl+"/machine";e.$http({method:"delete",url:o,data:a,header:{sessionId:F.sessionId,signature:F.signature,nonce:F.nonce,timestamp:F.timestamp,requestId:""}}).then(function(t){void 0==t.data.errCode?(e.$message({message:"删除成功",type:"success"}),e.getmachine()):(e.$message({message:t.data.errMsg,type:"warning"}),e.getmachine())})}).catch(function(){})},merchantId:function(){this.show_merchantId=!0}},created:function(){this.getmachine()}}),G={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("section",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}]},[a("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px"},attrs:{span:24}},[a("el-form",{attrs:{inline:!0,model:e.filters}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"机器编号/机器名"},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.getmachine()}}},[e._v("查询")])],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.handleAdd}},[e._v("新增")])],1)],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.machinelist,"highlight-current-row":""},on:{"selection-change":e.selsChange}},[a("el-table-column",{attrs:{type:"selection",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{type:"index",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"machineNo",label:"机器编号",width:"140"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"机器名",width:"140"}}),e._v(" "),a("el-table-column",{attrs:{prop:"address",label:"地址","min-width":"140"}}),e._v(" "),a("el-table-column",{attrs:{prop:"goodsStock",label:"米余量",width:"120",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"packageStock",label:"包装余量",width:"120",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"220",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small"},on:{click:function(a){e.handleEdit(t.$index,t.row)}}},[e._v("修改")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){e.handleDel(t.$index,t.row)}}},[e._v("删除")]),e._v(" "),a("el-button",{attrs:{type:"small",size:"small"}},[e._v("发命令")])]}}])})],1),e._v(" "),a("el-col",{staticClass:"toolbar",attrs:{span:24}},[a("el-button",{attrs:{type:"danger",disabled:0===this.sels.length},on:{click:e.batchRemove}},[e._v("批量删除")]),e._v(" "),a("el-pagination",{staticStyle:{float:"right"},attrs:{layout:"prev, pager, next","page-size":10,total:e.total},on:{"current-change":e.handleCurrentChange}})],1)],1)])},staticRenderFns:[]};var j=a("Z0/y")(Y,G,!1,function(e){a("tYK7")},"data-v-6667ca28",null).exports,J={data:function(){return{options:[],addForm:{machineNo:"",hardwareNo:"",name:"",model:"",lng:0,lat:0,goodsStock:200,goodsStockWarning:50,goodsStockFull:200,packageStock:1e3,packageStockWarning:100,packageStockFull:1e3,merchantId:""},mapshow:!1,mapsearch:"",addLoading:!1,addFormRules:{name:[{required:!0,message:"请输入机器名",trigger:"blur"}],machineNo:[{required:!0,message:"请输入机器编号",trigger:"blur"}],merchantId:[{required:!0,message:"请选择商家",trigger:"blur"}],hardwareNo:[{required:!0,message:"请选择硬件编号",trigger:"blur"}]}}},methods:{openmap:function(){var e=this;this.mapshow=!0;var t=document.getElementById("mapbtn"),a=document.getElementById("map");(a=new BMap.Map("map")).centerAndZoom(new BMap.Point(113.943214,22.529155),17),a.enableScrollWheelZoom(),a.enableKeyboard(),a.enableDragging(),a.enableDoubleClickZoom(),a.addEventListener("click",function(t){e.addForm.lng=t.point.lng,e.addForm.lat=t.point.lat});var o=new BMap.LocalSearch(a,{renderOptions:{map:a}});t.addEventListener("click",function(){""!=e.mapsearch&&o.search(e.mapsearch)})},getoptions:function(){var e=this,t=p.apiUrl+"/merchant/list?page=1&pageSize=10";this.$http({mehtod:"get",url:t,header:{sessionId:F.sessionId,signature:F.signature,nonce:F.nonce,timestamp:F.timestamp,requestId:""}}).then(function(t){e.options=t.data.list})},addmachine:function(){var e=this;this.$confirm("确认添加此机器吗?","提示",{type:"warning"}).then(function(){var t=p.apiUrl+"/machine";e.$http({method:"post",url:t,data:e.addForm,header:{sessionId:F.sessionId,signature:F.signature,nonce:F.nonce,timestamp:F.timestamp,requestId:""}}).then(function(t){void 0==t.data.errCode?e.$alert("新机器添加成功","提示",{confirmButtonText:"确定",callback:function(t){e.$router.push({path:"/list"})}}):e.$alert(t.data.errMsg,"提示",{confirmButtonText:"确定",callback:function(e){}})})}).catch(function(){})},quxiao:function(){var e=this;this.$alert("取消添加","提示",{confirmButtonText:"确定",callback:function(t){e.$router.push({path:"/list"})}})}},created:function(){this.getoptions()}},Q={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticStyle:{"font-size":"16px"}},[a("el-form",{ref:"addForm",attrs:{inline:!0,model:e.addForm,"label-width":"100px",rules:e.addFormRules}},[a("el-form-item",{attrs:{label:"机器编号",prop:"machineNo"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.machineNo,callback:function(t){e.$set(e.addForm,"machineNo",t)},expression:"addForm.machineNo"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"机器名",prop:"name"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.name,callback:function(t){e.$set(e.addForm,"name",t)},expression:"addForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"硬件编号",prop:"hardwareNo"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.hardwareNo,callback:function(t){e.$set(e.addForm,"hardwareNo",t)},expression:"addForm.hardwareNo"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"机器型号",prop:"model"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.model,callback:function(t){e.$set(e.addForm,"model",t)},expression:"addForm.model"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"谷余量",prop:"goodsStock"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.goodsStock,callback:function(t){e.$set(e.addForm,"goodsStock",t)},expression:"addForm.goodsStock"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"余量警戒线",prop:"goodsStockWarning"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.goodsStockWarning,callback:function(t){e.$set(e.addForm,"goodsStockWarning",t)},expression:"addForm.goodsStockWarning"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"谷库存最满量",prop:"goodsStockFull"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.goodsStockFull,callback:function(t){e.$set(e.addForm,"goodsStockFull",t)},expression:"addForm.goodsStockFull"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"包装袋余量",prop:"packageStock"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.packageStock,callback:function(t){e.$set(e.addForm,"packageStock",t)},expression:"addForm.packageStock"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"包装袋警戒线",prop:"packageStockWarning"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.packageStockWarning,callback:function(t){e.$set(e.addForm,"packageStockWarning",t)},expression:"addForm.packageStockWarning"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"包装袋最大值",prop:"packageStockFull"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.packageStockFull,callback:function(t){e.$set(e.addForm,"packageStockFull",t)},expression:"addForm.packageStockFull"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"商家",prop:"merchantId"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.addForm.merchantId,callback:function(t){e.$set(e.addForm,"merchantId",t)},expression:"addForm.merchantId"}},e._l(e.options,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"机器位置"}},[a("el-button",{on:{click:function(t){e.openmap()}}},[e._v("选择机器位置")]),e._v(" "),a("span",[e._v("经度："+e._s(e.addForm.lng))]),e._v(" "),a("span",[e._v("纬度："+e._s(e.addForm.lat))])],1),a("br"),e._v(" "),a("el-input",{directives:[{name:"show",rawName:"v-show",value:e.mapshow,expression:"mapshow"}],staticStyle:{width:"300px","margin-bottom":"10px"},attrs:{placeholder:"输入地点"},model:{value:e.mapsearch,callback:function(t){e.mapsearch=t},expression:"mapsearch"}},[a("el-button",{attrs:{slot:"append",id:"mapbtn"},slot:"append"},[e._v("搜索")])],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.mapshow,expression:"mapshow"}],attrs:{id:"map"}})],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",loading:e.addLoading},nativeOn:{click:function(t){e.addmachine()}}},[e._v("提交")]),e._v(" "),a("el-button",{on:{click:function(t){e.quxiao()}}},[e._v("取消")])],1)],1)},staticRenderFns:[]};var X=a("Z0/y")(J,Q,!1,function(e){a("SGrC")},"data-v-4dfb8257",null).exports,H={data:function(){return{editForm:{machineNo:"",hardwareNo:"",name:"",model:"",lng:"",lat:"",province:"",city:"",town:"",address:"",goodsStock:"",goodsStockWarning:"",goodsStockFull:"",packageStock:"",packageStockWarning:"",packageStockFull:"",productTime:"",status:"",merchantId:"",goods:""},mapshow:!1,mapsearch:"",options:[{status:-1,value:"停机"},{status:0,value:"离线"},{status:1,value:"待机"},{status:2,value:"工作中"}],options1:[],editFormRules:{name:[{required:!0,message:"请输入姓名",trigger:"blur"}]},editLoading:!1,machineNo:""}},methods:{openmap:function(){var e=this;this.mapshow=!0;var t=document.getElementById("mapbtn"),a=document.getElementById("map");(a=new BMap.Map("map")).centerAndZoom(new BMap.Point(113.943214,22.529155),17),a.enableScrollWheelZoom(),a.enableKeyboard(),a.enableDragging(),a.enableDoubleClickZoom(),a.addEventListener("click",function(t){e.editForm.lng=t.point.lng,e.editForm.lat=t.point.lat});var o=new BMap.LocalSearch(a,{renderOptions:{map:a}});t.addEventListener("click",function(){""!=e.mapsearch&&o.search(e.mapsearch)})},getParams:function(){this.machineNo=this.$route.query.machineNo},handleEdit:function(e){var t=this,a=p.apiUrl+"/machine/mg/"+e;this.$http({method:"get",url:a,header:{sessionId:F.sessionId,signature:F.signature,nonce:F.nonce,timestamp:F.timestamp,requestId:""}}).then(function(e){console.log(e.data),t.editForm=e.data})},getoptions1:function(){var e=this,t=p.apiUrl+"/merchant/list?page=1&pageSize=100&deleted=false";this.$http({mehtod:"get",url:t,header:{sessionId:F.sessionId,signature:F.signature,nonce:F.nonce,timestamp:F.timestamp,requestId:""}}).then(function(t){e.options1=t.data.list})},editSubmit:function(){var e=this;this.$confirm("确认修改本机器吗?","提示",{type:"warning"}).then(function(){var t=p.apiUrl+"/machine";e.$http({method:"put",url:t,data:e.editForm,header:{sessionId:F.sessionId,signature:F.signature,nonce:F.nonce,timestamp:F.timestamp,requestId:""}}).then(function(t){void 0==t.data.errCode?e.$alert("修改机器成功","提示",{confirmButtonText:"确定",callback:function(t){e.$router.push({path:"/list"})}}):e.$alert(t.data.errMsg,"提示",{confirmButtonText:"确定",callback:function(t){e.$router.push({})}})})}).catch(function(){})},quxiao:function(){var e=this;this.$alert("取消修改","提示",{confirmButtonText:"确定",callback:function(t){e.$router.push({path:"/list"})}})}},computed:{},created:function(){this.handleEdit(this.$route.query.machineNo),this.getoptions1()},watch:{$route:"getParams"}},ee={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticStyle:{"font-size":"16px"}},[a("el-form",{ref:"editForm",attrs:{inline:!0,model:e.editForm,"label-width":"100px",rules:e.editFormRules}},[a("el-form-item",{attrs:{label:"机器ID",prop:"machineNo"}},[a("el-input",{model:{value:e.editForm.machineNo,callback:function(t){e.$set(e.editForm,"machineNo",t)},expression:"editForm.machineNo"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"硬件编号",prop:"hardwareNo"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.hardwareNo,callback:function(t){e.$set(e.editForm,"hardwareNo",t)},expression:"editForm.hardwareNo"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"机器名",prop:"name"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.name,callback:function(t){e.$set(e.editForm,"name",t)},expression:"editForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"机器型号",prop:"model"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.model,callback:function(t){e.$set(e.editForm,"model",t)},expression:"editForm.model"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"省份",prop:"province"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.province,callback:function(t){e.$set(e.editForm,"province",t)},expression:"editForm.province"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"城市",prop:"city"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.city,callback:function(t){e.$set(e.editForm,"city",t)},expression:"editForm.city"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"镇",prop:"town"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.town,callback:function(t){e.$set(e.editForm,"town",t)},expression:"editForm.town"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"地址",prop:"address"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.address,callback:function(t){e.$set(e.editForm,"address",t)},expression:"editForm.address"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"余量警戒线",prop:"goodsStockWarning"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.goodsStockWarning,callback:function(t){e.$set(e.editForm,"goodsStockWarning",t)},expression:"editForm.goodsStockWarning"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"谷库存最满量",prop:"goodsStockFull"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.goodsStockFull,callback:function(t){e.$set(e.editForm,"goodsStockFull",t)},expression:"editForm.goodsStockFull"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"包装袋余量",prop:"packageStock"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.packageStock,callback:function(t){e.$set(e.editForm,"packageStock",t)},expression:"editForm.packageStock"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"包装袋警戒线",prop:"packageStockWarning"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.packageStockWarning,callback:function(t){e.$set(e.editForm,"packageStockWarning",t)},expression:"editForm.packageStockWarning"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"包装袋最大值",prop:"packageStockFull"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.packageStockFull,callback:function(t){e.$set(e.editForm,"packageStockFull",t)},expression:"editForm.packageStockFull"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"机器状态",prop:"status"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.editForm.status,callback:function(t){e.$set(e.editForm,"status",t)},expression:"editForm.status"}},e._l(e.options,function(e){return a("el-option",{key:e.status,attrs:{label:e.value,value:e.status}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"商家",prop:"merchantId"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.editForm.merchantId,callback:function(t){e.$set(e.editForm,"merchantId",t)},expression:"editForm.merchantId"}},e._l(e.options1,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"机器位置"}},[a("el-button",{on:{click:function(t){e.openmap()}}},[e._v("选择机器位置")]),e._v(" "),a("span",[e._v("经度："+e._s(e.editForm.lng))]),e._v(" "),a("span",[e._v("纬度："+e._s(e.editForm.lat))])],1),a("br"),e._v(" "),a("el-input",{directives:[{name:"show",rawName:"v-show",value:e.mapshow,expression:"mapshow"}],staticStyle:{width:"300px","margin-bottom":"10px"},attrs:{placeholder:"输入地点"},model:{value:e.mapsearch,callback:function(t){e.mapsearch=t},expression:"mapsearch"}},[a("el-button",{attrs:{slot:"append",id:"mapbtn"},slot:"append"},[e._v("搜索")])],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.mapshow,expression:"mapshow"}],attrs:{id:"map"}})],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",loading:e.editLoading},nativeOn:{click:function(t){return e.editSubmit(t)}}},[e._v("修改")]),e._v(" "),a("el-button",{on:{click:function(t){e.quxiao()}}},[e._v("取消")])],1)],1)},staticRenderFns:[]};var te=a("Z0/y")(H,ee,!1,function(e){a("AQ+Y")},"data-v-ecaf4f68",null).exports,ae={data:function(){return{fileList:[],configUrl:"http://www.sgu6.com",filters:{name:""},userlist:[],total:0,page:1,listLoading:!1,sels:[],editFormVisible:!1,editLoading:!1,editFormRules:{name:[{required:!0,message:"请输入姓名",trigger:"blur"}]},editForm:{id:"",categoryId:"",name:"",title:"",model:"",price:0,marketPrice:0,shortContent:"",content:"",metaKeyword:"",metaDescription:"",netWeight:0,grossWeight:0,saleTime:(new Date).toLocaleString(),merchantId:"",photo:[{id:"",imgUrl:"",sort:0,show:!1}],new:!1,enable:!1,hot:!1},addFormVisible:!1,addLoading:!1,addFormRules:{name:[{required:!0,message:"请输入姓名",trigger:"blur"}]},addForm:{id:"",categoryId:"",name:"",title:"",model:"",price:0,marketPrice:0,shortContent:"",content:"",metaKeyword:"",metaDescription:"",netWeight:0,grossWeight:0,saleTime:(new Date).toLocaleString(),merchantId:"",photo:[{id:"",imgUrl:"",sort:0,show:!1}],new:!1,enable:!1,hot:!1}}},methods:{handleRemove:function(e,t){console.log(e,t)},handlePreview:function(e){console.log(e)},handleExceed:function(e,t){this.$message.warning("当前限制选择 1 个文件，本次选择了 "+e.length+" 个文件")},formatSex:function(e,t){return 1==e.sex?"男":0==e.sex?"女":"未知"},handleCurrentChange:function(e){this.page=e,this.getUsers()},getUsers:function(){var e=this,t="http://api-dev.sgu6.com/goods/list?page="+this.page+"&pageSize=10";this.$http.get(t).then(function(t){e.userlist=t.data.list,e.total=t.data.total})},handleDel:function(e,t){var a=this;this.$confirm("确认删除该记录吗?","提示",{type:"warning"}).then(function(){a.listLoading=!0;var e={id:t.id};removeUser(e).then(function(e){a.listLoading=!1,a.$message({message:"删除成功",type:"success"}),a.getUsers()})}).catch(function(){})},handleEdit:function(e,t){this.editFormVisible=!0,this.editForm=c()({},t)},handleAdd:function(){this.addFormVisible=!0,this.addForm={id:"",categoryId:"",name:"",title:"",model:"",price:0,marketPrice:0,shortContent:"",content:"",metaKeyword:"",metaDescription:"",netWeight:0,grossWeight:0,saleTime:(new Date).toLocaleString(),merchantId:"",photo:[{id:"",imgUrl:"",sort:0,show:!1}],new:!1,enable:!1,hot:!1}},editSubmit:function(){var e=this;this.$refs.editForm.validate(function(t){t&&e.$confirm("确认提交吗？","提示",{}).then(function(){e.editLoading=!0;var t=c()({},e.editForm);t.birth=t.birth&&""!=t.birth?util.formatDate.format(new Date(t.birth),"yyyy-MM-dd"):"",editUser(t).then(function(t){e.editLoading=!1,e.$message({message:"提交成功",type:"success"}),e.$refs.editForm.resetFields(),e.editFormVisible=!1,e.getUsers()})})})},addSubmit:function(){var e=this;this.$refs.addForm.validate(function(t){t&&e.$confirm("确认提交吗？","提示",{}).then(function(){e.addLoading=!0;var t=c()({},e.addForm);t.birth=t.birth&&""!=t.birth?util.formatDate.format(new Date(t.birth),"yyyy-MM-dd"):"",addUser(t).then(function(t){e.addLoading=!1,e.$message({message:"提交成功",type:"success"}),e.$refs.addForm.resetFields(),e.addFormVisible=!1,e.getUsers()})})})},selsChange:function(e){this.sels=e},batchRemove:function(){var e=this,t=this.sels.map(function(e){return e.id}).toString();this.$confirm("确认删除选中记录吗？","提示",{type:"warning"}).then(function(){e.listLoading=!0,batchRemoveUser({ids:t}).then(function(t){e.listLoading=!1,e.$message({message:"删除成功",type:"success"}),e.getUsers()})}).catch(function(){})}},created:function(){this.getUsers()}},oe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px"},attrs:{span:24}},[a("el-form",{attrs:{inline:!0,model:e.filters}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"ID"},model:{value:e.filters.name,callback:function(t){e.$set(e.filters,"name",t)},expression:"filters.name"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.getUsers}},[e._v("查询")])],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.handleAdd}},[e._v("新增")])],1)],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.userlist,"highlight-current-row":""},on:{"selection-change":e.selsChange}},[a("el-table-column",{attrs:{type:"selection",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{type:"index",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"id",label:"ID",width:"100",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{label:"图片",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("img",{attrs:{src:e.configUrl+t.row.photo[0].imgUrl,width:"100",height:"100"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"类别","min-width":"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"title",label:"产品名","min-width":"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"model",label:"型号",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"price",label:"价格",width:"120",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"netWeight",label:"库存",width:"100",sortablealign:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"grossWeight",label:"销量",width:"100",sortablealign:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作","min-width":"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small"},on:{click:function(a){e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){e.handleDel(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("el-col",{staticClass:"toolbar",attrs:{span:24}},[a("el-button",{attrs:{type:"danger",disabled:0===this.sels.length},on:{click:e.batchRemove}},[e._v("批量删除")]),e._v(" "),a("el-pagination",{staticStyle:{float:"right"},attrs:{layout:"prev, pager, next","page-size":10,total:e.total},on:{"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"编辑","close-on-click-modal":!1},model:{value:e.editFormVisible,callback:function(t){e.editFormVisible=t},expression:"editFormVisible"}},[a("el-form",{ref:"editForm",attrs:{model:e.editForm,"label-width":"80px",rules:e.editFormRules}},[a("el-form-item",{attrs:{label:"ID",prop:"id"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.id,callback:function(t){e.$set(e.editForm,"id",t)},expression:"editForm.id"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"图片",prop:"name"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.name,callback:function(t){e.$set(e.editForm,"name",t)},expression:"editForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"类别",prop:"name"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.name,callback:function(t){e.$set(e.editForm,"name",t)},expression:"editForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"产品名",prop:"title"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.title,callback:function(t){e.$set(e.editForm,"title",t)},expression:"editForm.title"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"型号",prop:"model"}},[a("el-input",{model:{value:e.editForm.model,callback:function(t){e.$set(e.editForm,"model",t)},expression:"editForm.model"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"价格",prop:"price"}},[a("el-input",{model:{value:e.editForm.price,callback:function(t){e.$set(e.editForm,"price",t)},expression:"editForm.price"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"库存",prop:"netWeight"}},[a("el-input",{model:{value:e.editForm.netWeight,callback:function(t){e.$set(e.editForm,"netWeight",t)},expression:"editForm.netWeight"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"销量",prop:"grossWeight"}},[a("el-input",{model:{value:e.editForm.grossWeight,callback:function(t){e.$set(e.editForm,"grossWeight",t)},expression:"editForm.grossWeight"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{nativeOn:{click:function(t){e.editFormVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.editLoading},nativeOn:{click:function(t){return e.editSubmit(t)}}},[e._v("提交")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"新增","close-on-click-modal":!1},model:{value:e.addFormVisible,callback:function(t){e.addFormVisible=t},expression:"addFormVisible"}},[a("el-form",{ref:"addForm",attrs:{model:e.addForm,"label-width":"80px",rules:e.addFormRules}},[a("el-form-item",{attrs:{label:"ID",prop:"id"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.id,callback:function(t){e.$set(e.addForm,"id",t)},expression:"addForm.id"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"类别ID",prop:"categoryId"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.categoryId,callback:function(t){e.$set(e.addForm,"categoryId",t)},expression:"addForm.categoryId"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"商品名",prop:"name"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.name,callback:function(t){e.$set(e.addForm,"name",t)},expression:"addForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"商品标题",prop:"title"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.title,callback:function(t){e.$set(e.addForm,"title",t)},expression:"addForm.title"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"商品型号",prop:"model"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.model,callback:function(t){e.$set(e.addForm,"model",t)},expression:"addForm.model"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"商品价格",prop:"price"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.price,callback:function(t){e.$set(e.addForm,"price",t)},expression:"addForm.price"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"市场价格",prop:"marketPrice "}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.marketPrice,callback:function(t){e.$set(e.addForm,"marketPrice",t)},expression:"addForm.marketPrice"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"商品简介",prop:"shortContent"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.shortContent,callback:function(t){e.$set(e.addForm,"shortContent",t)},expression:"addForm.shortContent "}})],1),e._v(" "),a("el-form-item",{attrs:{label:"商品介绍",prop:"content"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.content,callback:function(t){e.$set(e.addForm,"content",t)},expression:"addForm.content "}})],1),e._v(" "),a("el-form-item",{attrs:{label:"关键词",prop:"metaKeyword"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.metaKeyword,callback:function(t){e.$set(e.addForm,"metaKeyword",t)},expression:"addForm.metaKeyword "}})],1),e._v(" "),a("el-form-item",{attrs:{label:"关键描述",prop:"metaDescription"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.metaDescription,callback:function(t){e.$set(e.addForm,"metaDescription",t)},expression:"addForm.metaDescription "}})],1),e._v(" "),a("el-form-item",{attrs:{label:"净重",prop:"netWeight"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.netWeight,callback:function(t){e.$set(e.addForm,"netWeight",t)},expression:"addForm.netWeight "}})],1),e._v(" "),a("el-form-item",{attrs:{label:"毛重",prop:"grossWeight"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.grossWeight,callback:function(t){e.$set(e.addForm,"grossWeight",t)},expression:"addForm.grossWeight "}})],1),e._v(" "),a("el-form-item",{attrs:{label:"上架时间",prop:"saleTime"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.saleTime,callback:function(t){e.$set(e.addForm,"saleTime",t)},expression:"addForm.saleTime "}})],1),e._v(" "),a("el-form-item",{attrs:{label:"商户ID",prop:"merchantId"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.merchantId,callback:function(t){e.$set(e.addForm,"merchantId",t)},expression:"addForm.merchantId "}})],1),e._v(" "),a("el-form",{attrs:{model:e.addForm.photo[0],"label-width":"80px"}},[a("el-form-item",{attrs:{label:"图片ID",prop:"id"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.photo[0].id,callback:function(t){e.$set(e.addForm.photo[0],"id",t)},expression:"addForm.photo[0].id"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"图片路径",prop:"imgUrl"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.photo[0].imgUrl,callback:function(t){e.$set(e.addForm.photo[0],"imgUrl",t)},expression:"addForm.photo[0].imgUrl"}})],1)],1),e._v(" "),a("el-upload",{staticClass:"upload-demo",attrs:{action:"http://api-dev.sgu6.com/photo","on-preview":e.handlePreview,"on-remove":e.handleRemove,multiple:"",limit:1,"on-exceed":e.handleExceed,"file-list":e.fileList}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件，且不超过500kb")])],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{nativeOn:{click:function(t){e.addFormVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.addLoading},nativeOn:{click:function(t){return e.addSubmit(t)}}},[e._v("提交")])],1)],1)],1)},staticRenderFns:[]};var ne=a("Z0/y")(ae,oe,!1,function(e){a("wRuq")},"data-v-76c6b88e",null).exports,re=a("KktO"),ie=a("a6xF"),se=a("JvG4"),le=a("SPR0"),de={data:function(){return{keyword:"",mapsearch:"",mapshow:!1,shangjiaid:"",show:!0,showadd:!1,showedit:!1,show_merchantId:!1,filters:{name:""},rolelist:[],total:0,page:1,listLoading:!1,sels:[],editFormVisible:!1,editLoading:!1,editFormRules:{name:[{required:!0,message:"请输入姓名",trigger:"blur"}]},addFormVisible:!1,addLoading:!1,addFormRules:{name:[{required:!0,message:"请输入机器名",trigger:"blur"}]}}},methods:{handleCurrentChange:function(e){this.page=e,this.getrole()},add0:function(e){return e<10?"0"+e:e},timeFormat:function(e){var t=new Date(e),a=t.getFullYear(),o=t.getMonth()+1,n=t.getDate(),r=t.getHours(),i=t.getMinutes();return a+"."+this.add0(o)+"."+this.add0(n)+" "+this.add0(r)+":"+this.add0(i)},merchant:function(e){var t=p.apiUrl+"/merchant/"+e;this.$http({method:"get",url:t,header:{sessionId:F.sessionId,signature:F.signature,nonce:F.nonce,timestamp:F.timestamp,requestId:""}}).then(function(e){return e.data.name})},getrole:function(){var e=this;this.listLoading=!0;var t=p.apiUrl+"/role/list?page="+this.page+"&pageSize=100&keyword="+this.keyword;this.$http({method:"get",url:t,header:{sessionId:F.sessionId,signature:F.signature,nonce:F.nonce,timestamp:F.timestamp,requestId:""}}).then(function(t){e.rolelist=t.data.list,e.total=t.data.total,e.listLoading=!1})},handleDel:function(e,t){var a=this;this.$confirm("确认删除本角色吗?","提示",{type:"warning"}).then(function(){var e=p.apiUrl+"/role";a.$http({method:"delete",url:e,data:{ids:[t.id]},header:{sessionId:F.sessionId,signature:F.signature,nonce:F.nonce,timestamp:F.timestamp,requestId:""}}).then(function(e){console.log(e.data.errCode),void 0==e.data.errCode?(a.$message({message:"删除成功",type:"success"}),a.getrole()):(a.$message({message:e.data.errMsg,type:"warning"}),a.getrole())}).catch(function(e){console.log(e)})}).catch(function(){})},handleEdit:function(e,t){this.$router.push({path:"/changerole",name:"修改角色",query:{id:t.id}})},handleAdd:function(){this.$router.push({path:"/addrole"})},editSubmit:function(){var e=this;this.$refs.editForm.validate(function(t){t&&e.$confirm("确认修改吗？","提示",{}).then(function(){e.editLoading=!0;var t=p.apiUrl+"/machine";e.$http.put(t,e.editForm).then(function(){e.$message({message:"修改成功",type:"success"}),e.getrole()})})})},addSubmit:function(){var e=this;this.$confirm("确认添加吗?","提示",{type:"warning"}).then(function(){var t=p.apiUrl+"/machine";e.$http.post(t,e.addForm).then(function(){e.$message({message:"添加成功",type:"success"}),e.addFormVisible=!1,e.getrole()}).catch(function(e){console.log("错误")})}).catch(function(){})},selsChange:function(e){this.sels=e},batchRemove:function(){var e=this,t=this.sels.map(function(e){return e.id});this.$confirm("确认删除选中记录吗？","提示",{type:"warning"}).then(function(){e.listLoading=!0;var a={ids:t};console.log(a);var o=p.apiUrl+"/role";e.$http({method:"delete",url:o,data:a,header:{sessionId:F.sessionId,signature:F.signature,nonce:F.nonce,timestamp:F.timestamp,requestId:""}}).then(function(t){console.log(t),void 0==t.data.errCode?(e.$message({message:"删除成功",type:"success"}),e.getrole()):(e.$message({message:t.data.errMsg,type:"warning"}),e.getrole())})}).catch(function(){})},openmap:function(){var e=this;this.mapshow=!0;var t=document.getElementById("mapbtn"),a=document.getElementById("map");(a=new BMap.Map("map")).centerAndZoom(new BMap.Point(113.943214,22.529155),17),a.enableScrollWheelZoom(),a.enableKeyboard(),a.enableDragging(),a.enableDoubleClickZoom(),a.addEventListener("click",function(t){e.addForm.lng=t.point.lng,e.addForm.lat=t.point.lat});var o=new BMap.LocalSearch(a,{renderOptions:{map:a}});t.addEventListener("click",function(){""!=e.mapsearch&&o.search(e.mapsearch)})},merchantId:function(){this.show_merchantId=!0}},created:function(){this.getrole()}},ce={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("section",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}]},[a("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px"},attrs:{span:24}},[a("el-form",{attrs:{inline:!0,model:e.filters}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"名称"},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.getrole()}}},[e._v("查询")])],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.handleAdd}},[e._v("新增")])],1)],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.rolelist,"highlight-current-row":""},on:{"selection-change":e.selsChange}},[a("el-table-column",{attrs:{type:"selection",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{type:"index",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"名称","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"type",label:"类型","min-width":"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间","min-width":"150",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n\t\t        "+e._s(e.timeFormat(t.row.createTime))+"\n\t\t    ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"220",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small"},on:{click:function(a){e.handleEdit(t.$index,t.row)}}},[e._v("修改")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){e.handleDel(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("el-col",{staticClass:"toolbar",attrs:{span:24}},[a("el-button",{attrs:{type:"danger",disabled:0===this.sels.length},on:{click:e.batchRemove}},[e._v("批量删除")]),e._v(" "),a("el-pagination",{staticStyle:{float:"right"},attrs:{layout:"prev, pager, next","page-size":10,total:e.total},on:{"current-change":e.handleCurrentChange}})],1)],1)])},staticRenderFns:[]};var me=a("Z0/y")(de,ce,!1,function(e){a("6B30")},"data-v-7392f604",null).exports,ue=(a("iocA"),{data:function(){return{editForm:{name:"",type:"",merchantId:"",remark:""},editFormRules:{name:[{required:!0,message:"请输入姓名",trigger:"blur"}]},editLoading:!1,id:""}},methods:{getParams:function(){this.id=this.$route.query.id},handleEdit:function(e){var t=this,a=p.apiUrl+"/role/detail/"+e;this.$http({method:"get",url:a,header:{sessionId:F.sessionId,signature:F.signature,nonce:F.nonce,timestamp:F.timestamp,requestId:""}}).then(function(e){t.editForm=e.data.role})},editSubmit:function(){var e=this;this.$confirm("确认修改本角色吗?","提示",{type:"warning"}).then(function(){var t=p.apiUrl+"/role";e.$http({method:"put",url:t,data:e.editForm,header:{sessionId:F.sessionId,signature:F.signature,nonce:F.nonce,timestamp:F.timestamp,requestId:""}}).then(function(t){void 0==t.data.errCode?e.$alert("修改角色成功","提示",{confirmButtonText:"确定",callback:function(t){e.$router.push({path:"/rolelist"})}}):e.$alert(t.data.errMsg,"提示",{confirmButtonText:"确定",callback:function(t){e.$router.push({path:"/rolelist"})}})})}).catch(function(){})},quxiao:function(){var e=this;this.$alert("取消修改","提示",{confirmButtonText:"确定",callback:function(t){e.$router.push({path:"/rolelist"})}})}},computed:{},created:function(){this.handleEdit(this.$route.query.id)},watch:{$route:"getParams"}}),pe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticStyle:{"font-size":"16px"}},[a("el-form",{ref:"editForm",attrs:{inline:!0,model:e.editForm,"label-width":"100px",rules:e.editFormRules}},[a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{model:{value:e.editForm.name,callback:function(t){e.$set(e.editForm,"name",t)},expression:"editForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"类型",prop:"type"}},[a("el-input",{attrs:{"auto-complete":"off",disabled:!0},model:{value:e.editForm.type,callback:function(t){e.$set(e.editForm,"type",t)},expression:"editForm.type"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"商家",prop:"merchantId"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.merchantId,callback:function(t){e.$set(e.editForm,"merchantId",t)},expression:"editForm.merchantId"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注",prop:"remark"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.remark,callback:function(t){e.$set(e.editForm,"remark",t)},expression:"editForm.remark"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",loading:e.editLoading},on:{click:function(t){e.editSubmit()}}},[e._v("修改")]),e._v(" "),a("el-button",{on:{click:function(t){e.quxiao()}}},[e._v("取消")])],1)],1)},staticRenderFns:[]};var he=a("Z0/y")(ue,pe,!1,function(e){a("8/lq")},null,null).exports,fe={data:function(){return{addForm:{name:"",type:"SYSTEM_DEFAULT",merchantId:"","remark ":""},options:[],mapshow:!1,mapsearch:"",addLoading:!1,show_merchantId:!1,addFormRules:{loginName:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],roleId:[{required:!0,message:"请选择角色",trigger:"blur"}]}}},methods:{getRoleId:function(){var e=this,t=p.apiUrl+"/merchant/list?page=1&pageSize=100";this.$http({method:"get",url:t,header:{sessionId:F.sessionId,signature:F.signature,nonce:F.nonce,timestamp:F.timestamp,requestId:""}}).then(function(t){e.options=t.data.list})},newUser:function(){var e=this;this.$confirm("确认添加本角色吗?","提示",{type:"warning"}).then(function(){var t=p.apiUrl+"/role";e.$http({method:"post",url:t,data:e.addForm,header:{sessionId:F.sessionId,signature:F.signature,nonce:F.nonce,timestamp:F.timestamp,requestId:""}}).then(function(t){void 0==t.data.errCode?e.$alert("新角色添加成功","提示",{confirmButtonText:"确定",callback:function(t){e.$router.push({path:"/rolelist"})}}):e.$alert(t.data.errMsg,"提示",{confirmButtonText:"确定",callback:function(e){}})})}).catch(function(){})},callback:function(){var e=this;this.$alert("确认取消添加","提示",{confirmButtonText:"确定",callback:function(t){e.$router.push({path:"/rolelist"})}})}},created:function(){this.getRoleId()}},ge={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticStyle:{"font-size":"16px"}},[a("br"),e._v(" "),a("el-form",{ref:"addForm",attrs:{inline:!0,model:e.addForm,"label-width":"80px",rules:e.addFormRules}},[a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.name,callback:function(t){e.$set(e.addForm,"name",t)},expression:"addForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"类型",prop:"type"}},[a("el-input",{attrs:{"auto-complete":"off",disabled:!0},model:{value:e.addForm.type,callback:function(t){e.$set(e.addForm,"type",t)},expression:"addForm.type"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"商家",prop:"merchantId"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.addForm.merchantId,callback:function(t){e.$set(e.addForm,"merchantId",t)},expression:"addForm.merchantId"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"备注",prop:"remark "}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.remark,callback:function(t){e.$set(e.addForm,"remark",t)},expression:"addForm.remark "}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",loading:e.addLoading},nativeOn:{click:function(t){e.newUser()}}},[e._v("提交")]),e._v(" "),a("el-button",{nativeOn:{click:function(t){e.callback()}}},[e._v("取消")])],1)],1)},staticRenderFns:[]};var ve=a("Z0/y")(fe,ge,!1,function(e){a("TeF0")},"data-v-18ab161b",null).exports,be=a("X3iG"),Fe={data:function(){return{day:"",month:"",interval:"",todaydata:{},monthdata:{},intervaldata:{}}},methods:{add0:function(e){return e<10?"0"+e:e},gettoday:function(){this.day=(new Date).getFullYear()+"-"+this.add0((new Date).getMonth()+1)+"-"+this.add0((new Date).getDate()),this.month=(new Date).getFullYear()+"-"+this.add0((new Date).getMonth()+1)},gettoaydata:function(){var e=this,t=p.apiUrl+"/data/orderInfoOverView?timeStart="+this.day+"&dateUnit=d";this.$http({method:"get",url:t,header:{sessionId:F.sessionId,signature:F.signature,nonce:F.nonce,timestamp:F.timestamp,requestId:""}}).then(function(t){e.todaydata=t.data})},getmonthdata:function(){var e=this,t=p.apiUrl+"/data/orderInfoOverView?timeStart="+this.month+"&dateUnit=m";this.$http({method:"get",url:t,header:{sessionId:F.sessionId,signature:F.signature,nonce:F.nonce,timestamp:F.timestamp,requestId:""}}).then(function(t){e.monthdata=t.data})},getInterval:function(){var e=this;console.log(this.interval[0]);var t=p.apiUrl+"/data/orderInfoOverView?timeStart="+this.interval[0]+"&timeEnd="+this.interval[1]+"&dateUnit=c";this.$http({method:"get",url:t,header:{sessionId:F.sessionId,signature:F.signature,nonce:F.nonce,timestamp:F.timestamp,requestId:""}}).then(function(t){e.intervaldata=t.data})}},created:function(){this.gettoday(),this.gettoaydata(),this.getmonthdata()},watch:{day:function(){this.gettoaydata()},month:function(){this.getmonthdata()},interval:function(){this.getInterval()}}},_e={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",{attrs:{gutter:20}},[a("el-col",{staticClass:"day",attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[a("h5",[e._v("日报")]),e._v(" "),a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd"},model:{value:e.day,callback:function(t){e.day=t},expression:"day"}}),e._v(" "),a("div",{staticClass:"daydata"},[a("div",{staticClass:"day_allo"},[a("p",{staticClass:"title"},[e._v("总金额(元)")]),e._v(" "),a("p",{staticClass:"num"},[e._v(e._s(e.todaydata.payMoneySum))])]),e._v(" "),a("div",{staticClass:"day_allm"},[a("p",{staticClass:"title"},[e._v("订单数(个)")]),e._v(" "),a("p",{staticClass:"num"},[e._v(e._s(e.todaydata.payNum))])]),e._v(" "),a("div",{staticClass:"day_tm"},[a("p",{staticClass:"title"},[e._v("退款金额(元)")]),e._v(" "),a("p",{staticClass:"num"},[e._v(e._s(e.todaydata.refundMoneySum))])]),e._v(" "),a("div",{staticClass:"day_to"},[a("p",{staticClass:"title"},[e._v("退款单数(个)")]),e._v(" "),a("p",{staticClass:"num"},[e._v(e._s(e.todaydata.refundNum))])])])],1)]),e._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[a("h5",[e._v("月报")]),e._v(" "),a("el-date-picker",{attrs:{type:"month",placeholder:"选择月",format:"yyyy 年 MM 月","value-format":"yyyy-MM"},model:{value:e.month,callback:function(t){e.month=t},expression:"month"}}),e._v(" "),a("div",{staticClass:"daydata"},[a("div",{staticClass:"day_allo"},[a("p",{staticClass:"title"},[e._v("总金额(元)")]),e._v(" "),a("p",{staticClass:"num"},[e._v(e._s(e.monthdata.payMoneySum))])]),e._v(" "),a("div",{staticClass:"day_allm"},[a("p",{staticClass:"title"},[e._v("订单数(个)")]),e._v(" "),a("p",{staticClass:"num"},[e._v(e._s(e.monthdata.payNum))])]),e._v(" "),a("div",{staticClass:"day_tm"},[a("p",{staticClass:"title"},[e._v("退款金额(元)")]),e._v(" "),a("p",{staticClass:"num"},[e._v(e._s(e.monthdata.refundMoneySum))])]),e._v(" "),a("div",{staticClass:"day_to"},[a("p",{staticClass:"title"},[e._v("退款单数(个)")]),e._v(" "),a("p",{staticClass:"num"},[e._v(e._s(e.monthdata.refundNum))])])])],1)]),e._v(" "),a("el-col",{staticClass:"day",attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[a("h5",[e._v("期报")]),e._v(" "),a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd"},model:{value:e.interval,callback:function(t){e.interval=t},expression:"interval"}}),e._v(" "),a("div",{staticClass:"daydata"},[a("div",{staticClass:"day_allo"},[a("p",{staticClass:"title"},[e._v("总金额(元)")]),e._v(" "),a("p",{staticClass:"num"},[e._v(e._s(e.intervaldata.payMoneySum))])]),e._v(" "),a("div",{staticClass:"day_allm"},[a("p",{staticClass:"title"},[e._v("订单数(个)")]),e._v(" "),a("p",{staticClass:"num"},[e._v(e._s(e.intervaldata.payNum))])]),e._v(" "),a("div",{staticClass:"day_tm"},[a("p",{staticClass:"title"},[e._v("退款金额(元)")]),e._v(" "),a("p",{staticClass:"num"},[e._v(e._s(e.intervaldata.refundMoneySum))])]),e._v(" "),a("div",{staticClass:"day_to"},[a("p",{staticClass:"title"},[e._v("退款单数(个)")]),e._v(" "),a("p",{staticClass:"num"},[e._v(e._s(e.intervaldata.refundNum))])])])],1)])],1)},staticRenderFns:[]};var ye=a("Z0/y")(Fe,_e,!1,function(e){a("SCdh")},"data-v-deba36d0",null).exports,ke=a("6YAI"),we=[{path:"/login",component:_,name:"",hidden:!0},{path:"/404",component:y.default,name:"",hidden:!0},{path:"/",component:N,name:"用户管理",iconCls:"el-icon-message",redirect:{path:"/userlist"},children:[{path:"/userlist",component:L,name:"用户列表"},{path:"/adduser",component:V,name:"新增用户",hidden:!0},{path:"/changeuser",component:A,name:"修改用户",hidden:!0},{path:"/memberlist",component:D,name:"会员列表"},{path:"/member/changemember",component:Z,name:"修改会员",hidden:!0},{path:"/supplierlist",component:K.default,name:"供应商列表"}]},{path:"/",component:N,name:"产品",iconCls:"el-icon-share",children:[{path:"/goodslist",component:ne,name:"产品列表"},{path:"/goodsmould",component:re.default,name:"产品模板"},{path:"/classify",component:ie.default,name:"分类设置"}]},{path:"/",component:N,name:"机器管理",iconCls:"el-icon-more",children:[{path:"/list",component:j,name:"机器列表"},{path:"/addmachine",component:X,name:"新增机器",hidden:!0},{path:"/changemachine",component:te,name:"修改机器",hidden:!0}]},{path:"/",component:N,name:"图片空间",iconCls:"el-icon-picture",children:[{path:"/imageroom",component:se.default,name:"图片管理"}]},{path:"/",component:N,name:"权限管理",iconCls:"el-icon-setting",children:[{path:"/resources",component:le.default,name:"资源管理"},{path:"/rolelist",component:me,name:"角色列表"},{path:"/addrole",component:ve,name:"新增角色",hidden:!0},{path:"/changerole",component:he,name:"修改角色",hidden:!0},{path:"/consumer",component:be.default,name:"用户权限"}]},{path:"/",component:N,name:"订单管理",iconCls:"el-icon-document",children:[{path:"/brief",component:ye,name:"信息总览"},{path:"/order",component:ke.default,name:"订单"}]},{path:"*",hidden:!0,redirect:{path:"/404"}}];o.default.use(h.a);var $e=new h.a({mode:"history",routes:we}),xe=$e,Ie=(a("1dB9"),{render:function(){var e=this.$createElement;return(this._self._c||e)("router-view")},staticRenderFns:[]});var Se=a("Z0/y")({name:"app",mounted:function(){}},Ie,!1,function(e){a("xuZx")},null,null).exports;o.default.prototype.$http=r.a,o.default.use(i.a),o.default.use(l.a);o.default.use(h.a);var Ce=new o.default({router:xe,render:function(e){return e(Se)}});xe.onReady(function(){Ce.$mount("#app")})},"R7/f":function(e,t){},SCdh:function(e,t){},SDTk:function(e,t){},SGrC:function(e,t){},SPR0:function(e,t,a){"use strict";var o=a("giQ8"),n=a.n(o),r=a("5j58");var i=function(e){a("4T8R")},s=a("Z0/y")(n.a,r.a,!1,i,null,null);t.default=s.exports},SUWd:function(e,t,a){"use strict";var o={render:function(){var e=this.$createElement;return(this._self._c||e)("router-view")},staticRenderFns:[]};t.a=o},TeF0:function(e,t){},U0xQ:function(e,t,a){"use strict";var o=a("/2Ux"),n=a.n(o),r=a("SUWd");var i=function(e){a("R7/f")};a("Z0/y")(n.a,r.a,!1,i,null,null).exports},VEOY:function(e,t){},X3iG:function(e,t,a){"use strict";var o=a("CKoO"),n=a.n(o),r=a("8n0i");var i=function(e){a("8Uju")},s=a("Z0/y")(n.a,r.a,!1,i,"data-v-002849d2",null);t.default=s.exports},Yipb:function(e,t){function a(){var e=10*(document.documentElement.clientWidth/320);document.getElementsByTagName("html")[0].style.fontSize=e+"px"}window.addEventListener("resize",function(){a()},!1),a()},Zj6V:function(e,t){},a6xF:function(e,t,a){"use strict";var o=a("fpVW"),n=a.n(o),r=a("buXm");var i=function(e){a("GGRE")},s=a("Z0/y")(n.a,r.a,!1,i,null,null);t.default=s.exports},aK3Y:function(e,t){},buXm:function(e,t,a){"use strict";var o={render:function(){var e=this.$createElement;return(this._self._c||e)("div")},staticRenderFns:[]};t.a=o},d0RY:function(e,t){},d3fZ:function(e,t){},fFnX:function(e,t,a){"use strict";var o=a("0rjR"),n=a.n(o),r=a("9nRy");var i=function(e){a("6Fw9")};a("Z0/y")(n.a,r.a,!1,i,null,null).exports},fpVW:function(e,t){},fssh:function(e,t){},giQ8:function(e,t){},iocA:function(e,t,a){"use strict";var o=a("jXQS"),n=a.n(o),r=a("ESMP");var i=function(e){a("nzZl")};a("Z0/y")(n.a,r.a,!1,i,null,null).exports},jXQS:function(e,t){},mxn6:function(e,t){},n7KG:function(e,t){},nxtM:function(e,t){},nzZl:function(e,t){},oIDl:function(e,t){},s5oW:function(e,t){},t3qZ:function(e,t,a){e.exports=a.p+"static/img/logo_vertical.2b67770.png"},tYK7:function(e,t){},w6cp:function(e,t){},wRuq:function(e,t){},wy9P:function(e,t,a){"use strict";var o={render:function(){var e=this.$createElement;return(this._self._c||e)("div",[this._v("图片空间")])},staticRenderFns:[]};t.a=o},wytx:function(e,t,a){"use strict";var o={render:function(){var e=this.$createElement;return(this._self._c||e)("p",{staticClass:"page-container"},[this._v("404... page not found")])},staticRenderFns:[]};t.a=o},xcpF:function(e,t){},xuZx:function(e,t){},y5Kl:function(e,t,a){"use strict";var o=a("s5oW"),n=a.n(o),r=a("0Rih");var i=function(e){a("236G")};a("Z0/y")(n.a,r.a,!1,i,null,null).exports}},["NHnr"]);
//# sourceMappingURL=app.007d51b2ca4a4c43f396.js.map